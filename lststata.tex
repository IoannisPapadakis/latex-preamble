% language definition
\lstdefinelanguage{Stata}{
  % Left for users to add missing commands,
  % with possibility of choosing different style.
  keywordsprefix=\$,
  %
  % Popular add-on commands
  morekeywords=[2]{
    cntrade
    ,chinafin
    ,wbopendata
    ,spmap
    ,xtreg
    ,outreg
    ,outreg2
  },
  %
  % System Commands
  morekeywords=[3]{about
    ,adopath
    ,adoupdate
    ,assert
    ,break
    ,by
    ,cap
    ,capture
    ,cd
    ,chdir
    ,checksum
    ,class
    ,classutil
    ,compress
    ,confirm
    ,conf
    ,conren
    ,continue
    ,count
    ,cou
    ,cscript
    ,cscript_log
    ,d
    ,describe
    ,dir
    ,discard
    ,di
    ,display
    ,do
    ,doedit
    ,drop
    ,edit
    ,end
    ,erase
    ,ereturn
    ,eret
    ,error
    ,err
    ,exit
    ,e
    ,expand
    ,expandcl
    ,file
    ,findfile
    ,format
    ,generate
    ,g
    ,gettoken
    ,global
    ,gl
    ,help
    ,hexdump
    ,include
    ,infile
    ,infix
    ,input
    ,insheet
    ,joinby
    ,label
    ,la
    ,levelsof
    ,list
    ,local
    ,loc
    ,log
    ,macro
    ,ma
    ,mark
    ,markout
    ,marksample
    ,mata
    ,matrix
    ,memory
    ,merge
    ,mkdir
    ,more
    ,net
    ,nobreak
    ,noisily
    ,n
    ,notes
    ,note
    ,numlist
    ,outfile
    ,outsheet
    ,_parse
    ,pause
    ,plugin
    ,post
    ,postclose
    ,postfile
    ,preserve
    ,print
    ,printer
    ,profiler
    ,program
    ,pr
    ,query
    ,q
    ,quietly
    ,qui
    ,rcof
    ,ivregress
    ,regress
    ,reg
    ,rename
    ,repeat
    ,replace
    ,reshape
    ,return
    ,ret
    ,_rmcoll
    ,_rmcoll
    ,_rmcollright
    ,rmdir
    ,_robust
    ,save
    ,scalar
    ,sca
    ,search
    ,serset
    ,set
    ,shell
    ,sleep
    ,sort
    ,split
    ,sret
    ,sreturn
    ,ssc
    ,summarize
    ,su
    ,syntax
    ,sysdescribe
    ,sysdir
    ,sysuse
    ,tokenize
    ,token
    ,translate
    ,type
    ,unab
    ,unabcmd
    ,update
    ,use
    ,version
    ,vers
    ,view
    ,viewsource
    ,webdescribe
    ,webseek
    ,webuse
    ,which
    ,who
    ,window
  },
  %
  % Keywords
  morekeywords=[4]{
    forvalues
    ,forv
    ,while
    ,if
    ,foreach
    ,set
    ,else
  },
  % Built-in functions
  morekeywords=[5]{
    % Math
    abs
    ,acos
    ,acosh
    ,asin
    ,asinh
    ,atan
    ,atan2
    ,atanh
    ,ceil
    ,cloglog
    ,comb
    ,cos
    ,cosh
    ,digamma
    ,exp
    ,floor
    ,int
    ,invcloglog
    ,invlogit
    ,ln
    ,lnfactorial
    ,lngamma
    ,log
    ,log10
    ,logit
    ,max
    ,min
    ,mod
    ,reldif
    ,round
    ,sign
    ,sin
    ,sinh
    ,sqrt
    ,sum
    ,tan
    ,tanh
    ,trigamma
    ,trunc
    %
    % Probability distriubtions and density functions
    ,ibeta
    ,betaden
    ,ibetatail
    ,invibeta
    ,invibetatail
    ,nibeta
    ,nbetaden
    ,invnibeta
    ,binomial
    ,binomialp
    ,binomialtail
    ,invbinomial
    ,invbinomialtail
    ,chi2
    ,chi2den
    ,chi2tail
    ,invchi2
    ,invchi2tail
    ,nchi2
    ,nchi2den
    ,nchi2tail
    ,invnchi2
    ,invnchi2tail
    ,npnchi2
    ,dunnettprob
    ,invdunnettprob
    ,F
    ,Fden
    ,Ftail
    ,invF
    ,invFtail
    ,nF
    ,nFden
    ,nFtail
    ,invnFtail
    ,npnF
    ,gammap
    ,gammaden
    ,gammaptail
    ,invgammap
    ,invgammaptail
    ,dgammapda
    ,dgammapdada
    ,dgammapdadx
    ,dgammapdx
    ,dgammapdxdx
    ,hypergeometric
    ,hypergeometricp
    ,nbinomial
    ,nbinomialp
    ,nbinomialtail
    ,invnbinomial
    ,invnbinomialtail
    ,binormal
    ,normal
    ,normalden
    ,invnormal
    ,lnnormal
    ,lnnormalden
    ,poisson
    ,poissonp
    ,poissontail
    ,invpoisson
    ,invpoissontail
    ,t
    ,tden
    ,ttail
    ,invt
    ,invttail
    ,nt
    ,ntden
    ,nttail
    ,invnttail
    ,npnt
    ,tukeyprob
    ,invtukeyprob
    %
    % Random numbers
    ,runiform
    ,rbeta
    ,rbinomial
    ,rchi2
    ,rgamma
    ,rhypergeometric
    ,rnbinomial
    ,rnormal
    ,rpoisson
    ,rt
    %
    % String
    ,abbrev
    ,char
    ,indexnot
    ,itrim
    ,length
    ,lower
    ,ltrim
    ,plural
    ,proper
    ,real
    ,regexm
    ,regexr
    ,regexs
    ,reverse
    ,rtrim
    ,soundex
    ,soundex_nara
    ,strcat
    ,strdup
    ,string
    ,strlen
    ,strlower
    ,strltrim
    ,strmatch
    ,strofreal
    ,strpos
    ,strproper
    ,strreverse
    ,strrtrim
    ,strtoname
    ,strtrim
    ,strupper
    ,subinstr
    ,subinword
    ,substr
    ,trim
    ,upper
    ,word
    ,wordcount
    %
    % Programming
    ,autocode
    ,byteorder
    ,c
    ,_caller
    ,chop
    ,clip
    ,cond
    ,e
    ,epsdouble
    ,epsfloat
    ,fileexists
    ,fileread
    ,filereaderror
    ,filewrite
    ,float
    ,fmtwidth
    ,has_eprop
    ,inlist
    ,inrange
    ,irecode
    ,matrix
    ,maxbyte
    ,maxdouble
    ,maxfloat
    ,maxint
    ,maxlong
    ,mi
    ,minbyte
    ,mindouble
    ,minfloat
    ,minint
    ,minlong
    ,missing
    ,r
    ,recode
    ,replay
    ,return
    ,s
    ,scalar
    ,smallestdouble
    %
    % Date
    ,bofd
    ,Cdhms
    ,Chms
    ,Clock
    ,clock
    ,Cmdyhms
    ,Cofc
    ,cofC
    ,Cofd
    ,cofd
    ,daily
    ,date
    ,day
    ,dhms
    ,dofb
    ,dofC
    ,dofc
    ,dofh
    ,dofm
    ,dofq
    ,dofw
    ,dofy
    ,dow
    ,doy
    ,halfyear
    ,halfyearly
    ,hh
    ,hhC
    ,hms
    ,hofd
    ,hours
    ,mdy
    ,mdyhms
    ,minutes
    ,mm
    ,mmC
    ,mofd
    ,month
    ,monthly
    ,msofhours
    ,msofminutes
    ,msofseconds
    ,qofd
    ,quarter
    ,quarterly
    ,seconds
    ,ss
    ,ssC
    ,tC
    ,tc
    ,td
    ,th
    ,tm
    ,tq
    ,tw
    ,week
    ,weekly
    ,wofd
    ,year
    ,yearly
    ,yh
    ,ym
    ,yofd
    ,yq
    ,yw
    %
    % Time-series
    ,tin
    ,twithin
    %
    % Matrix returns a scalar
    ,colnumb
    ,colsof
    ,det
    ,diag0cnt
    ,el
    ,issymmetric
    ,matmissing
    ,mreldif
    ,rownumb
    ,rowsof
    ,trace
    %
    % Matrix returns a matrix
    ,cholesky
    ,corr
    ,diag
    ,get
    ,hadamard
    ,I
    ,inv
    ,invsym
    ,J
    ,matuniform
    ,nullmat
    ,sweep
    ,vec
    ,vecdiag
  },
  %
  %
  % Misc
  morecomment=[l]{//},
  morecomment=[s]{/*}{*/},
  morecomment=[n][keywordstyle9]{`}{'},
  morestring=[b]",
  sensitive=true,
}

\lstdefinestyle{stata-editor}{
    language=Stata,
    style=mcstyle,
    %
    % Color settings to match do-file editor style
    % Commands that are not included in the definition
    %
    keywordstyle={\color{Blue}},
    %
    % Popular add-on commands
    %
    keywordstyle=[2]{\color{Blue}},
    %
    % System commands
    keywordstyle=[3]{\bfseries\color{Blue}},
    %
    % Keywords
    keywordstyle=[4]{\color{Blue}},
    %
    % Built-in functions like rnormal
    keywordstyle=[5]{\bfseries\color{blue}},
    %
    % Used by macros, i.e. `lags'
    keywordstyle=[9]{\bfseries\color{LightSteelBlue}\let\textcolor\textcolordummy},
    stringstyle=\color{Maroon},
    literate={0}{{\textcolor{blue}{0}}}{1}%
             {1}{{\textcolor{blue}{1}}}{1}%
             {2}{{\textcolor{blue}{2}}}{1}%
             {3}{{\textcolor{blue}{3}}}{1}%
             {4}{{\textcolor{blue}{4}}}{1}%
             {5}{{\textcolor{blue}{5}}}{1}%
             {6}{{\textcolor{blue}{6}}}{1}%
             {7}{{\textcolor{blue}{7}}}{1}%
             {8}{{\textcolor{blue}{8}}}{1}%
             {9}{{\textcolor{blue}{9}}}{1}%
             {.0}{{\textcolor{blue}{.0}}}{2}% Following is to ensure that only periods
             {.1}{{\textcolor{blue}{.1}}}{2}% followed by a digit are changed.
             {.2}{{\textcolor{blue}{.2}}}{2}%
             {.3}{{\textcolor{blue}{.3}}}{2}%
             {.4}{{\textcolor{blue}{.4}}}{2}%
             {.5}{{\textcolor{blue}{.5}}}{2}%
             {.6}{{\textcolor{blue}{.6}}}{2}%
             {.7}{{\textcolor{blue}{.7}}}{2}%
             {.8}{{\textcolor{blue}{.8}}}{2}%
             {.9}{{\textcolor{blue}{.9}}}{2}%
}

